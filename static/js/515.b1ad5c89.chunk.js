"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[515],{6487:function(n,e,r){r.d(e,{Df:function(){return u},M1:function(){return p},TP:function(){return s},XT:function(){return c},tx:function(){return f}});var t=r(5861),a=r(7757),i=r.n(a),o=r(1044);o.ZP.defaults.baseURL="https://api.themoviedb.org/3/";var u=function(){var n=(0,t.Z)(i().mark((function n(e){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.ZP.get("trending/movie/day",{params:{api_key:"6f46b11c91adf322aba101aff37aa78d"},signal:e.signal});case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c=function(){var n=(0,t.Z)(i().mark((function n(e){var r,t,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.userQuery,t=e.controller,n.next=3,o.ZP.get("search/movie?query=".concat(r),{params:{api_key:"6f46b11c91adf322aba101aff37aa78d"},signal:t.signal});case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s=function(){var n=(0,t.Z)(i().mark((function n(e){var r,t,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.movieId,t=e.controller,n.next=3,o.ZP.get("/movie/".concat(r),{params:{api_key:"6f46b11c91adf322aba101aff37aa78d"},signal:t.signal});case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p=function(){var n=(0,t.Z)(i().mark((function n(e){var r,t,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.movieId,t=e.controller,n.next=3,o.ZP.get("/movie/".concat(r,"/credits"),{params:{api_key:"6f46b11c91adf322aba101aff37aa78d"},signal:t.signal});case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),f=function(){var n=(0,t.Z)(i().mark((function n(e){var r,t,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.movieId,t=e.controller,n.next=3,o.ZP.get("/movie/".concat(r,"/reviews"),{params:{api_key:"6f46b11c91adf322aba101aff37aa78d"},signal:t.signal});case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},8058:function(n,e,r){r.d(e,{Z:function(){return s}});var t,a=r(1087),i=r(7689),o=r(168),u=r(6444).ZP.li(t||(t=(0,o.Z)(["\n  padding: 4px 0;\n"]))),c=r(184),s=function(n){var e=n.movies,r=(0,i.TH)();return(0,c.jsx)("ul",{children:e.map((function(n){return(0,c.jsx)(u,{children:(0,c.jsx)(a.rU,{to:"/movies/".concat(n.id),state:{from:r},children:n.original_title})},n.id)}))})}},1515:function(n,e,r){r.r(e),r.d(e,{default:function(){return q}});var t,a,i,o,u=r(5861),c=r(885),s=r(7757),p=r.n(s),f=r(5705),l=r(2797),d=r(168),h=r(6444),m=(0,h.ZP)(f.l0)(t||(t=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  max-width: 600px;\n  background-color: #fff;\n  border-radius: 3px;\n  overflow: hidden;\n"]))),v=(0,h.ZP)(f.gN)(a||(a=(0,d.Z)(["\n  display: inline-block;\n  width: 350px;\n  height: 44px;\n  font: inherit;\n  font-size: 20px;\n border: 1px solid rgb(237, 236, 236);\n  outline: none;\n  padding-left: 4px;\n  padding-right: 4px;\n  ::placeholder {\n  font: inherit;\n  font-size: 18px;\n"]))),b=h.ZP.button(i||(i=(0,d.Z)(["\n  display: inline-block;\n  width: 56px;\n  height: 48px;\n  border: 0;\n  opacity: 0.6;\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n  outline: none;\n  :hover {\n    opacity: 1;\n  }\n"]))),x=(0,h.ZP)(f.Bc)(o||(o=(0,d.Z)(["\n  display: inline-block;\n  width: 100%;\n  height: auto;\n  color: red;\n"]))),y=r(184),g={query:""},Z=l.Ry().shape({query:l.Z_().trim().min(1,"Enter query!").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Search query may contain only letters, apostrophe, dash and spaces.")}),w=function(n){var e=n.onSubmitForm;return(0,y.jsx)(f.J9,{initialValues:g,onSubmit:function(n,r){var t=n.query,a=r.resetForm,i=t.trim();e(i),a()},validationSchema:Z,children:function(n){var e=n.isSubmitting;return(0,y.jsxs)(m,{children:[(0,y.jsx)(v,{type:"text",name:"query",autoComplete:"off",autoFocus:!0,placeholder:"Search movies"}),(0,y.jsx)(b,{type:"submit",disabled:e,children:"Search"}),(0,y.jsx)(x,{name:"query",component:"span"})]})}})},k=r(1087),P=r(2791),j=r(6487),_=r(8058),q=function(){var n=(0,P.useState)([]),e=(0,c.Z)(n,2),r=e[0],t=e[1],a=(0,k.lr)(),i=(0,c.Z)(a,2),o=i[0],s=i[1],f=o.get("query");(0,P.useEffect)((function(){var n=new AbortController,e={userQuery:f,controller:n};function r(){return(r=(0,u.Z)(p().mark((function n(){var r,a;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,f){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,(0,j.XT)(e);case 5:r=n.sent,0!==(a=r.results).length&&t(a),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){n.abort()}}),[f]);return(0,y.jsxs)("main",{children:[(0,y.jsx)(w,{onSubmitForm:function(n){s(""!==n?{query:n}:{}),t([])}}),0!==r.length&&(0,y.jsx)(_.Z,{movies:r})]})}}}]);
//# sourceMappingURL=515.b1ad5c89.chunk.js.map